var XCalc=function(){function B(s){(this.operator=s)||XCalc.log("Operator has no input."),this.solve=function(s,t,e){var n=s.coefficient;"variable"==s.type&&(n=e);var i=t.coefficient;return"variable"==t.type&&(i=e),"+"==this.operator?new R(n+i):"-"==this.operator?new R(n-i):"*"==this.operator?new R(n*i):"/"==this.operator?new R(n/i):"^"==this.operator?new R(Math.pow(n,i)):void 0}}function L(s){(this.f=s)||XCalc.log("Math function has no input."),this.solve=function(s){var t=s.coefficient;return console.log(this.f),console.log("fdsfsdfd"),"sin"==this.f?new R(Math.sin(t)):"cos"==this.f?new R(Math.cos(t)):"tan"==this.f?new R(Math.tan(t)):"asin"==this.f?new R(Math.asin(t)):"acos"==this.f?new R(Math.acos(t)):"atan"==this.f?new R(Math.atan(t)):"abs"==this.f?new R(Math.abs(t)):"log"==this.f?new R(Math.log(t)/Math.log(10)):"ln"==this.f?new R(Math.log(t)):void 0}}function H(s){(this.c=s)||XCalc.log("Math function has no input."),this.solve=function(){return"pi"==this.c?new R(Math.PI):"e"==this.c?new R(Math.E):"i"==this.c?new R(Math.E):void 0},this.prettyC=function(){return"pi"==this.c?"&pi;":"e"==this.c?"e":void 0}}function R(s){this.sections=[],this.type="section",this.operator=0,this.coefficient=0,this.mathFunction=0,this.mathConstant=0,this.variable="";var t=function(s,t){var e=!0,n=-1;n="^"!=s?t.lastIndexOf(s):t.indexOf(s);for(;e;){for(var i=0,o=0;o<t.length;o++)if("("==t.substr(o,1)?i++:")"==t.substr(o,1)&&i--,o==n){if(0===i&&("-"!=s||0<o&&-1=="+-/*^".indexOf(t.substr(o-1,1))||0===o)||1==i&&"("==s){e=!1;break}n="^"!=s?t.substring(0,n).lastIndexOf(s):-1==t.substring(n+1).indexOf(s)?-1:n+1+t.substring(n+1).indexOf(s)}-1==n&&(e=!1)}return n},e=function(s,t){var e=0,n=-1,i=0;if("sin"==s)i=/(a)?sin/g;else if("cos"==s)i=/(a)?cos/g;else{if("tan"!=s)return-1;i=/(a)?tan/g}for(e=i.exec(t);e;e=i.exec(t))"a"!=RegExp.$1&&(n=e.index);for(var o=!0;o&&-1!=n;){for(var c=0,r=0;r<t.length;r++)if("("==t.substr(r,1)?c++:")"==t.substr(r,1)&&c--,r==n){if(0===c){o=!1;break}var a=t.substring(0,n);for(n=-1,e=i.exec(a);e;e=i.exec(a))"a"!=RegExp.$1&&(n=e.index)}-1==n&&(o=!1)}return"cos"==s&&console.log(n),n};if(this.containsX=function(){return"variable"==this.type||"value"!=this.type&&(1==this.sections.length?this.sections[0].containsX():2==this.sections.length?this.sections[0].containsX()||this.sections[1].containsX():void 0)},this.containsConstant=function(){return"constant"==this.type||"value"!=this.type&&(1==this.sections.length?this.sections[0].containsConstant():2==this.sections.length?this.sections[0].containsConstant()||this.sections[1].containsConstant():void 0)},this.equals=function(s){return this.type==s.type&&("function"==this.type?this.mathFunction.f==s.mathFunction.f&&this.sections[0].equals(s.sections[0]):"variable"==this.type?this.variable==s.variable&&this.coefficient==s.coefficient:"constant"==this.type?this.mathConstant.c==s.mathConstant.c:"value"==this.type?this.coefficient==s.coefficient:"section"==this.type?"*"==this.operator.operator||"+"==this.operator.operator?this.operator.operator==s.operator.operator&&(this.sections[0].equals(s.sections[0])&&this.sections[1].equals(s.sections[1])||this.sections[0].equals(s.sections[1])&&this.sections[1].equals(s.sections[0])):this.operator.operator==s.operator.operator&&this.sections[0].equals(s.sections[0])&&this.sections[1].equals(s.sections[1]):void 0)},this.solve=function(s){return s||(s=0),"value"==this.type?this:"variable"==this.type?new R(s):"constant"==this.type?this.mathConstant.solve():"function"==this.type?this.mathFunction.solve(this.sections[0].solve(s)):1==this.sections.length?this.sections[0].solve(s):2==this.sections.length?this.operator.solve(this.sections[0].solve(s),this.sections[1].solve(s),s):void 0},this.result=function(s){return this.solve(s).coefficient},this.simplify=function(){var s,t=new R(this);if(t.containsX()&&"variable"!=t.type){for(var e=0;e<t.sections.length;e++)t.sections[e]=t.sections[e].simplify();if("section"==t.type)if("+"==t.operator.operator)"value"==t.sections[0].type&&0===t.sections[0].coefficient?t=t.sections[1]:"value"==t.sections[1].type&&0===t.sections[1].coefficient&&(t=t.sections[0]);else if("-"==t.operator.operator)"value"==t.sections[1].type&&0===t.sections[1].coefficient&&(t=t.sections[1]);else if("*"==t.operator.operator)if("value"==t.sections[0].type&&1==t.sections[0].coefficient)t=new R(t.sections[1]);else if("value"==t.sections[1].type&&1==t.sections[1].coefficient)t=new R(t.sections[0]);else if("value"==t.sections[0].type&&0===t.sections[0].coefficient||"value"==t.sections[1].type&&0===t.sections[1].coefficient)t=new R(0);else if("section"==t.sections[1].type&&"/"==t.sections[1].operator.operator&&"value"==t.sections[1].sections[0].type&&1==t.sections[1].sections[0].coefficient)t.operator=new B("/"),t.sections[1]=t.sections[1].sections[1];else if("section"==t.sections[0].type&&"/"==t.sections[0].operator.operator&&"value"==t.sections[0].sections[0].type&&1==t.sections[0].sections[0].coefficient){t.operator=new B("/");var n=t.sections[1];t.sections[1]=t.sections[0].sections[1],t.sections[0]=n}else if("section"==t.sections[0].type&&"^"==t.sections[0].operator.operator&&"section"==t.sections[1].type&&"^"==t.sections[1].operator.operator&&t.sections[0].sections[0].equals(t.sections[1].sections[0])){var i=new R(0);i.type="section",i.sections.push(t.sections[0].sections[1]),i.sections.push(t.sections[1].sections[1]),i.operator=new B("+"),t.sections[0]=t.sections[0].sections[0],t.sections[1]=i,t.operator=new B("^")}else"section"==t.sections[0].type&&"*"==t.sections[0].operator.operator?((s=new R(0)).operator=new B("*"),s.type="section",t.sections[0].sections[1].containsX()?t.sections[0].sections[0].containsX()||(t.sections[0].sections[1].containsX()?(s.sections.push(t.sections[0].sections[1]),s.sections.push(t.sections[1]),t.sections[0]=t.sections[0].sections[0]):(s.sections.push(t.sections[0].sections[0]),s.sections.push(t.sections[1]),t.sections[0]=t.sections[0].sections[1]),t.sections[1]=s):(t.sections[0].sections[0].containsX()?(s.sections.push(t.sections[0].sections[0]),s.sections.push(t.sections[1]),t.sections[0]=t.sections[0].sections[1]):(s.sections.push(t.sections[0].sections[1]),s.sections.push(t.sections[1]),t.sections[0]=t.sections[0].sections[0]),t.sections[1]=s)):"section"==t.sections[1].type&&"*"==t.sections[1].operator.operator&&((s=new R(0)).operator=new B("*"),s.type="section",t.sections[1].sections[1].containsX()?t.sections[1].sections[0].containsX()||(t.sections[1].sections[1].containsX()?(s.sections.push(t.sections[1].sections[1]),s.sections.push(t.sections[0]),t.sections[1]=t.sections[1].sections[0]):(s.sections.push(t.sections[1].sections[0]),s.sections.push(t.sections[0]),t.sections[1]=t.sections[1].sections[1]),t.sections[0]=s):(t.sections[1].sections[0].containsX()?(s.sections.push(t.sections[1].sections[0]),s.sections.push(t.sections[0]),t.sections[1]=t.sections[1].sections[1]):(s.sections.push(t.sections[1].sections[1]),s.sections.push(t.sections[0]),t.sections[1]=t.sections[1].sections[0]),t.sections[0]=s));else if("/"==t.operator.operator){if("value"==t.sections[1].type&&1==t.sections[1].coefficient)t=t.sections[0];else if(t.sections[0].equals(t.sections[1]))t=new R(1);else if("section"==t.sections[0].type&&"^"==t.sections[0].operator.operator&&"section"==t.sections[1].type&&"^"==t.sections[1].operator.operator&&t.sections[0].sections[0].equals(t.sections[1].sections[0])){var o=new R(0);o.type="section",o.sections.push(t.sections[0].sections[1]),o.sections.push(t.sections[1].sections[1]),o.operator=new B("-"),t.sections[0]=t.sections[0].sections[0],t.sections[1]=o,t.operator=new B("^")}}else if("^"==t.operator.operator)if("value"==t.sections[1].type&&1==t.sections[1].coefficient)t=t.sections[0];else if("value"==t.sections[1].type&&0===t.sections[1].coefficient)t=new R(0);else if("value"==t.sections[0].type&&1==t.sections[0].coefficient)t=new R(1);else if("section"==t.sections[0].type&&("/"==t.sections[0].operator.operator||"/"==t.sections[0].operator.operator)){var c=new R(0);c.type="section",c.operator=new B("^"),c.sections.push(t.sections[0].sections[0]),c.sections.push(t.sections[1]);var r=new R(0);r.type="section",r.operator=new B("^"),r.sections.push(t.sections[0].sections[1]),r.sections.push(t.sections[1]),t.operator=t.sections[0].operator,t.sections[0]=c,t.sections[1]=r}}else"variable"==t.type||t.containsConstant()&&t.result()%1!=0||(t.coefficient=t.result(),t.type="value");return this.equals(t)?this:t.simplify()},this.derivative=function(){var s,t,e,n,i=new R(this),o=new R(0);if("variable"==i.type)o.coefficient=1;else if("value"!=i.type&&"constant"!=i.type&&i.containsX())if("section"==i.type&&"^"!=i.operator.operator){if("+"==i.operator.operator)o.type="section",o.sections.push(i.sections[0].derivative()),o.sections.push(i.sections[1].derivative()),o.operator=new B("+");else if("-"==i.operator.operator)o.type="section",o.sections.push(i.sections[0].derivative()),o.sections.push(i.sections[1].derivative()),o.operator=new B("-");else if("*"==i.operator.operator)(s=new R(0)).type="section",s.sections.push(i.sections[0].derivative()),s.sections.push(i.sections[1]),s.operator=new B("*"),(t=new R(0)).type="section",t.sections.push(i.sections[0]),t.sections.push(i.sections[1].derivative()),t.operator=new B("*"),o.type="section",o.sections.push(s),o.sections.push(t),o.operator=new B("+");else if("/"==i.operator.operator){(s=new R(0)).type="section",s.sections.push(i.sections[0].derivative()),s.sections.push(i.sections[1]),s.operator=new B("*"),(t=new R(0)).type="section",t.sections.push(i.sections[1].derivative()),t.sections.push(i.sections[0]),t.operator=new B("*");var c=new R(0);c.type="section",c.sections.push(s),c.sections.push(t),c.operator=new B("-");var r=new R(0);r.type="section",r.sections.push(i.sections[1]),r.sections.push(new R(2)),r.operator=new B("^"),o.type="section",o.sections.push(c),o.sections.push(r),o.operator=new B("/")}}else{var a;if(((s=new R(0)).type="section")==i.type&&"^"==i.operator.operator)if(i.sections[1].containsX()&&i.sections[0].containsX())s=i,(t=new R(0)).type="function",t.sections.push(i.sections[0]),t.mathFunction=new L("ln"),(e=new R(0)).type="section",e.sections.push(i.sections[1]),e.sections.push(t),e.operator=new B("*"),a=e.derivative();else if(i.sections[1].containsX())(t=new R(0)).type="function",t.sections.push(i.sections[0]),t.mathFunction=new L("ln"),s.sections.push(i),s.sections.push(t),s.operator=new B("*"),a=i.sections[1].derivative();else{var h=new R(0);h.type="section",h.sections.push(i.sections[1]),h.sections.push(new R(1)),h.operator=new B("-"),(t=new R(0)).type="section",t.sections.push(i.sections[0]),t.sections.push(h),t.operator=new B("^"),s.sections.push(i.sections[1]),s.sections.push(t),s.operator=new B("*"),a=i.sections[0].derivative()}else if(a=i.sections[0].derivative(),"ln"==i.mathFunction.f)s.sections.push(new R(1)),s.sections.push(i.sections[0]),s.operator=new B("/");else if("log"==i.mathFunction.f)(t=new R(0)).mathFunction=new L("ln"),t.type="function",t.sections.push(new R(10)),(e=new R(0)).type="section",e.sections.push(i.sections[0]),e.sections.push(t),e.operator=new B("*"),s.sections.push(new R(1)),s.sections.push(e),s.operator=new B("/");else if("sin"==i.mathFunction.f)s.mathFunction=new L("cos"),s.type="function",s.sections.push(i.sections[0]);else if("cos"==i.mathFunction.f)(t=new R(0)).mathFunction=new L("sin"),t.type="function",t.sections.push(i.sections[0]),s.sections.push(new R(0)),s.sections.push(t),s.operator=new B("-");else if("tan"==i.mathFunction.f)(t=new R(0)).mathFunction=new L("cos"),t.type="function",t.sections.push(i.sections[0]),(e=new R(0)).type="section",e.sections.push(t),e.sections.push(new R(2)),e.operator=new B("^"),s.sections.push(new R(1)),s.sections.push(e),s.operator=new B("/");else if("asin"==i.mathFunction.f)(t=new R(0)).type="section",t.sections.push(i.sections[0]),t.sections.push(new R(2)),t.operator=new B("^"),(e=new R(0)).type="section",e.sections.push(new R(1)),e.sections.push(t),e.operator=new B("-"),(n=new R(0)).type="section",n.sections.push(e),n.sections.push(new R(.5)),n.operator=new B("^"),s.sections.push(new R(1)),s.sections.push(n),s.operator=new B("/");else if("acos"==i.mathFunction.f){(t=new R(0)).type="section",t.sections.push(i.sections[0]),t.sections.push(new R(2)),t.operator=new B("^"),(e=new R(0)).type="section",e.sections.push(new R(1)),e.sections.push(t),e.operator=new B("-"),(n=new R(0)).type="section",n.sections.push(new R(0)),n.sections.push(new R(1)),n.operator=new B("-");var p=new R(0);p.type="section",p.sections.push(e),p.sections.push(new R(.5)),p.operator=new B("^"),s.sections.push(n),s.sections.push(p),s.operator=new B("/")}else"atan"==i.mathFunction.f&&((t=new R(0)).type="section",t.sections.push(i.sections[0]),t.sections.push(new R(2)),t.operator=new B("^"),(e=new R(0)).type="section",e.sections.push(t),e.sections.push(new R(1)),e.operator=new B("+"),s.sections.push(new R(1)),s.sections.push(e),s.operator=new B("/"));o.type="section",o.sections.push(s),o.sections.push(a),o.operator=new B("*")}else o.coefficient=0;return o},this.formula=function(){var s="";return"value"==this.type?s+=this.coefficient:"variable"==this.type?s+="x":"constant"==this.type?s+=this.mathConstant.c:"function"==this.type?s+=this.mathFunction.f+"("+this.sections[0].formula()+")":"section"==this.type&&("section"==this.sections[0].type?s+="("+this.sections[0].formula()+")":s+=this.sections[0].formula(),s+=this.operator.operator,"section"==this.sections[1].type?s+="("+this.sections[1].formula()+")":s+=this.sections[1].formula()),s},this.derive=function(){return this.simplify().derivative().simplify()},this.prettyFormula=function(){var s="<div class='group "+this.type+("section"==this.type&&"/"==this.operator.operator?" division":"")+"'>";return"value"==this.type?s+=this.coefficient:"variable"==this.type?s+="x":"constant"==this.type?s+=this.mathConstant.prettyC():"function"==this.type?s+=this.mathFunction.f+"("+this.sections[0].prettyFormula()+")":"section"==this.type&&("section"==this.sections[0].type&&"/"!=this.sections[0].operator.operator?s+="("+this.sections[0].prettyFormula()+")":s+=this.sections[0].prettyFormula(),"*"==this.operator.operator?s+="<span class='operator'>&times</span>":"^"!=this.operator.operator&&"/"!=this.operator.operator&&(s+="<span class='operator'>"+this.operator.operator+"</span>"),"^"==this.operator.operator?s+="<div class='group exponent'>"+this.sections[1].prettyFormula()+"</div>":"/"==this.operator.operator?s+="<div class='group denom'>"+this.sections[1].prettyFormula()+"</div>":"section"==this.sections[1].type&&"/"!=this.sections[0].operator.operator?s+="("+this.sections[1].prettyFormula()+")":s+=this.sections[1].prettyFormula()),s+="</div>"},void 0!==s){if("string"==typeof s){var n=t("+",s=function(s){if(!s)return"";for(;"("==s.substr(0,1)&&")"==s.substr(s.length-1,1);){for(var t=1,e=1;e<s.length&&0<t;e++)"("==s.substr(e,1)&&t++,")"==s.substr(e,1)&&t--;if(e-=1,0!==t||e!=s.length-1)break;s=s.substring(1,s.length-1)}return s}(s=s.replace(/\s/g,""))),i=t("-",s),o=t("/",s),c=t("^",s),r=t("(",s),a=e("sin",s),h=e("cos",s),p=e("tan",s),u=t("asin",s),f=t("acos",s),l=t("atan",s),w=t("abs",s),y=t("log",s),v=t("ln",s),b=t("sqrt",s),g=t("e",s),m=t("pi",s),d=t("i",s),x=t("*",s),F=function(s){var t=!0,e=!0,n=-1,i=-1,o="+-/*^sincostanabsloglnsqrt";for(n=s.lastIndexOf("("),i=s.lastIndexOf(")");t||e;){for(var c=0,r=0;r<s.length;r++)"("==s.substr(r,1)?c++:")"==s.substr(r,1)&&c--,r==n&&t&&(1==c&&0!==r&&-1==o.indexOf(s.substr(r-1,1))?t=!1:n=s.substring(0,n).lastIndexOf("(")),r==i&&e&&(0===c&&r<s.length-1&&-1==o.indexOf(s.substr(r+1,1))?e=!1:i=s.substring(0,i).lastIndexOf(")"));-1==n&&(t=!1),-1==i&&(e=!1)}return n<i&&-1!=i?i:n}(s),M=t("x",s),O=t("X",s);M<O&&(M=O);var C=-1,X="+-/*^sincostanabsloglnsqrt";if(x<a&&(0===a||-1==X.indexOf(s.substr(a-1,1)))&&(C=a),x<h&&(0===h||-1==X.indexOf(s.substr(h-1,1)))&&(C=h),x<p&&(0===p||-1==X.indexOf(s.substr(p-1,1)))&&(C=p),x<u&&(0===u||-1==X.indexOf(s.substr(u-1,1)))&&(C=u),x<f&&(0===f||-1==X.indexOf(s.substr(f-1,1)))&&(C=f),x<l&&(0===l||-1==X.indexOf(s.substr(l-1,1)))&&(C=l),x<w&&(0===w||-1==X.indexOf(s.substr(w-1,1)))&&(C=w),x<y&&(0===y||-1==X.indexOf(s.substr(y-1,1)))&&(C=y),x<v&&(0===v||-1==X.indexOf(s.substr(v-1,1)))&&(C=v),x<b&&(0===b||-1==X.indexOf(s.substr(b-1,1)))&&(C=b),x<M&&(0===M||-1==X.indexOf(s.substr(M-1,1)))&&(C=M),x<g&&(0===g||-1==X.indexOf(s.substr(g-1,1)))&&(C=g),x<m&&(0===m||-1==X.indexOf(s.substr(m-1,1)))&&(C=g),-1!=n&&i<n)this.sections.push(new R(s.substring(0,n))),this.sections.push(new R(s.substring(n+1))),this.operator=new B("+");else if(-1!=i)0<i?this.sections.push(new R(s.substring(0,i))):this.sections.push(new R(0)),this.sections.push(new R(s.substring(i+1))),this.operator=new B("-");else if(0<C&&Math.max(C,x,F,o)==C)this.sections.push(new R(s.substring(0,C))),this.sections.push(new R(s.substring(C))),this.operator=new B("*");else if(-1!=F&&Math.max(F,x,o)==F)this.sections.push(new R(s.substring(0,F))),this.sections.push(new R(s.substring(F))),this.operator=new B("*");else if(-1!=x&&o<x)this.sections.push(new R(s.substring(0,x))),this.sections.push(new R(s.substring(x+1))),this.operator=new B("*");else if(-1!=o)this.sections.push(new R(s.substring(0,o))),this.sections.push(new R(s.substring(o+1))),this.operator=new B("/");else if(-1!=c)this.sections.push(new R(s.substring(0,c))),this.sections.push(new R(s.substring(c+1))),this.operator=new B("^");else if(-1!=a&&Math.max(a,h,p,u,f,l,w,y,v,b)==a)this.sections.push(new R(s.substring(a+3))),this.mathFunction=new L("sin"),this.type="function";else if(-1!=h&&Math.max(h,p,u,f,l,w,y,v,b)==h)this.sections.push(new R(s.substring(h+3))),this.mathFunction=new L("cos"),this.type="function";else if(-1!=p&&Math.max(p,u,f,l,w,y,v,b)==p)this.sections.push(new R(s.substring(p+3))),this.mathFunction=new L("tan"),this.type="function";else if(-1!=u&&Math.max(u,f,l,w,y,v,b)==u)this.sections.push(new R(s.substring(u+4))),this.mathFunction=new L("asin"),this.type="function";else if(-1!=f&&Math.max(f,l,w,y,v,b)==f)this.sections.push(new R(s.substring(f+4))),this.mathFunction=new L("acos"),this.type="function";else if(-1!=l&&Math.max(l,w,y,v,b)==l)this.sections.push(new R(s.substring(l+4))),this.mathFunction=new L("atan"),this.type="function";else if(-1!=w&&Math.max(w,y,v,b)==w)this.sections.push(new R(s.substring(w+3))),this.mathFunction=new L("abs"),this.type="function";else if(-1!=y&&Math.max(y,v,b)==y)this.sections.push(new R(s.substring(y+3))),this.mathFunction=new L("log"),this.type="function";else if(-1!=v&&Math.max(v,b)==v)this.sections.push(new R(s.substring(v+2))),this.mathFunction=new L("ln"),this.type="function";else if(-1!=b)this.sections.push(new R(s.substring(b+4))),this.sections.push(new R("0.5")),this.operator=new B("^");else if(-1!=r){var q=1;for(d=r+1;d<s.length&&0<q;d++)"("==s.substr(d,1)&&q++,")"==s.substr(d,1)&&q--;if(0===q){var E=d-1;0<r&&this.sections.push(new R(s.substring(0,r))),E-r!=1&&this.sections.push(new R(s.substring(r+1,E))),E!=s.length-1&&this.sections.push(new R(s.substring(E+1))),this.operator=new B("*")}else XCalc.log("Brackets nesting error: "+s)}else if(-1!=g&&m<g)0<g?(this.sections.push(new R(s.substring(0,g))),this.sections.push(new R("e")),this.operator=new B("*")):(this.mathConstant=new H("e"),this.type="constant");else if(-1!=m)0<m?(this.sections.push(new R(s.substring(0,m))),this.sections.push(new R("pi")),this.operator=new B("*")):(this.mathConstant=new H("pi"),this.type="constant");else{var k=s.toLowerCase().indexOf("x");-1!=k?0<k?(this.sections.push(new R(s.substring(0,k))),this.sections.push(new R("x")),this.operator=new B("*")):(this.variable="x",this.type="variable"):(this.coefficient=parseFloat(s),this.type="value")}}else if("number"==typeof s)this.coefficient=s,this.type="value";else if(s.simplify){this.coefficient=s.coefficient,this.operator=s.operator,this.mathFunction=s.mathFunction,this.mathConstant=s.mathConstant,this.variable=s.variable,this.type=s.type,this.sections=[];for(var I=0;I<s.sections.length;I++)this.sections.push(new R(s.sections[I]))}}else XCalc.log("Segment has no input.")}var s={errors:[],log:function(s){this.errors.push(s)},clearErrors:function(){this.errors=[]},hasErrors:function(){return this.errors.length},displayErrors:function(){var s=document.createElement("div");s.className="error",s.innerHTML="Errors:";for(var t=document.createElement("ul"),e=0;e<this.errors.length;e++){var n=document.createElement("li");n.innerHTML=this.errors[e],t.appendChild(n)}return s.appendChild(t),s},properBrackets:function(s){for(var t=0,e=0;e<s.length;e++)"("==s.substr(e,1)&&t++,")"==s.substr(e,1)&&t--;return 0===t},createExpression:function(s){return this.properBrackets(s)?new R(s):(this.log("Improperly nested brackets."),0)},graphExpression:function(s,t,e,n,i,o,c){return this.properBrackets(s)?new Graph(s,t,e,n,i,o,c):(this.log("Improperly nested brackets."),0)}};return s}();